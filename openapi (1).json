{
  "openapi": "3.0.0",
  "info": {
    "version": "1.0",
    "title": "CRIF Service Spec",
    "description": "Proxy service to call CRIF API."
  },
  "servers": [
    {
      "url": "https://localhost:8080"
    }
  ],
  "paths": {
    "/api/v1/realm/{realmId}/user/{userId}/crif/initiate": {
      "post": {
        "description": "Wrapper api to Call CRIF service api and get credit report of user.",
        "summary": "This API will return credit report of user if auto-authentication is true.",
        "tags": [
          "CRIF Credit Report"
        ],
        "operationId": "postUserDetails",
        "parameters": [
          {
            "$ref": "#/components/parameters/RealmId"
          },
          {
            "$ref": "#/components/parameters/UserId"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CRIFInitiateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "OK",
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "$ref": "#/components/schemas/CRIFInitiateResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "$ref": "#/components/schemas/CRIFInitiateResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/realm/{realmId}/user/{userId}/crif/user-authentication": {
      "post": {
        "description": "Wrapper api to Call CRIF service api and get credit report of user.",
        "summary": "If auto-authentication is false , this api should be called to send the user response to the question.",
        "tags": [
          "CRIF Credit Report"
        ],
        "operationId": "postUserAuthentication",
        "parameters": [
          {
            "$ref": "#/components/parameters/RealmId"
          },
          {
            "$ref": "#/components/parameters/UserId"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CRIFUserAuthRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "OK",
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "$ref": "#/components/schemas/CRIFUserAuthResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request body",
            "content": {
              "application/json;charset=utf-8": {
                "schema": {
                  "$ref": "#/components/schemas/CRIFUserAuthResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "parameters": {
      "RealmId": {
        "name": "realmId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "UserId": {
        "name": "userId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        }
      },
      "OrderId": {
        "name": "orderId",
        "in": "header",
        "required": true,
        "description": "Unique key provided by Customer/ merchant to track the request.\n  It should be unique for every new request and should never be same for two different transactions.\n",
        "schema": {
          "type": "string"
        }
      },
      "ReportId": {
        "name": "reportId",
        "in": "header",
        "required": true,
        "description": "As generated by CHM and received in response of Stage I by merchant.\n",
        "schema": {
          "type": "string"
        }
      }
    },
    "schemas": {
      "CRIFInitiateRequest": {
        "required": [
          "userDetails",
          "userConsent"
        ],
        "type": "object",
        "properties": {
          "userDetails": {
            "$ref": "#/components/schemas/UserDetails"
          },
          "userConsent": {
            "$ref": "#/components/schemas/UserConsent"
          }
        }
      },
      "UserDetails": {
        "required": [
          "firstName",
          "lastName",
          "DOB",
          "phoneNumber",
          "emailId",
          "panNumber",
          "address"
        ],
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string"
          },
          "lastName": {
            "type": "string"
          },
          "DOB": {
            "type": "string",
            "format": "date"
          },
          "phoneNumber": {
            "type": "string"
          },
          "emailId": {
            "type": "string"
          },
          "panNumber": {
            "type": "string"
          },
          "address": {
            "$ref": "#/components/schemas/Address"
          }
        }
      },
      "UserConsent": {
        "type": "object",
        "required": [
          "consentDate"
        ],
        "properties": {
          "consent": {
            "type": "boolean"
          },
          "consentDate": {
            "type": "string",
            "format": "date"
          }
        }
      },
      "Address": {
        "type": "object",
        "required": [
          "addressLine",
          "village",
          "city",
          "state",
          "pinCode",
          "country"
        ],
        "properties": {
          "addreesLine": {
            "type": "string"
          },
          "village": {
            "type": "string"
          },
          "city": {
            "type": "string"
          },
          "state": {
            "$ref": "#/components/schemas/State"
          },
          "pinCode": {
            "type": "string"
          },
          "country": {
            "type": "string"
          }
        }
      },
      "CRIFInitiateResponse": {
        "type": "object",
        "required": [
          "orderId",
          "reportId",
          "status"
        ],
        "properties": {
          "orderId": {
            "$ref": "#/components/schemas/OrderId"
          },
          "reportId": {
            "$ref": "#/components/schemas/ReportId"
          },
          "status": {
            "$ref": "#/components/schemas/Status"
          },
          "creditReport": {
            "$ref": "#/components/schemas/CreditReport"
          },
          "question": {
            "$ref": "#/components/schemas/Question"
          },
          "answers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Answer"
            }
          }
        }
      },
      "CRIFUserAuthRequest": {
        "type": "object",
        "required": [
          "orderId",
          "ReportId",
          "Answer"
        ],
        "properties": {
          "orderId": {
            "$ref": "#/components/schemas/OrderId"
          },
          "reportId": {
            "$ref": "#/components/schemas/ReportId"
          },
          "answer": {
            "$ref": "#/components/schemas/Answer"
          }
        }
      },
      "CRIFUserAuthResponse": {
        "type": "object",
        "required": [
          "orderId",
          "reportId",
          "status"
        ],
        "properties": {
          "orderId": {
            "$ref": "#/components/schemas/OrderId"
          },
          "reportId": {
            "$ref": "#/components/schemas/ReportId"
          },
          "status": {
            "$ref": "#/components/schemas/Status"
          },
          "creditReport": {
            "$ref": "#/components/schemas/CreditReport"
          },
          "question": {
            "$ref": "#/components/schemas/Question"
          },
          "answers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Answer"
            }
          }
        }
      },
      "State": {
        "type": "string",
        "enum": [
          "AP",
          "AR",
          "AS",
          "BR",
          "CG",
          "GA",
          "GJ",
          "HR",
          "HP",
          "JK",
          "JH",
          "KA",
          "KL",
          "MP",
          "MH",
          "MN",
          "ML",
          "MZ",
          "NL",
          "OR",
          "PB",
          "RJ",
          "SK",
          "TN",
          "TS",
          "TR",
          "UK",
          "UP",
          "WB",
          "AN",
          "CH",
          "DN",
          "DD",
          "DL",
          "LD",
          "PY"
        ]
      },
      "OrderId": {
        "type": "string"
      },
      "ReportId": {
        "type": "string"
      },
      "Status": {
        "type": "string",
        "enum": [
          "S1",
          "S2",
          "S06",
          "S10",
          "S11"
        ]
      },
      "Question": {
        "type": "string"
      },
      "Answer": {
        "type": "string"
      },
      "CreditReport": {
        "type": "object",
        "properties": {
          "B2C-REPORT": {
            "$ref": "#/components/schemas/B2C-REPORT"
          }
        }
      },
      "HEADER": {
        "type": "object",
        "properties": {
          "DATE-OF-REQUEST": {
            "type": "string"
          },
          "PREPARED-FOR": {
            "type": "string"
          },
          "DATE-OF-ISSUE": {
            "type": "string"
          },
          "REPORT-ID": {
            "type": "string"
          },
          "BATCH-ID": {
            "type": "string"
          },
          "STATUS": {
            "type": "string"
          }
        }
      },
      "REQUEST": {
        "type": "object",
        "properties": {
          "NAME": {
            "type": "string"
          },
          "DOB": {
            "type": "string"
          },
          "PAN": {
            "type": "string"
          },
          "EMAIL-1": {
            "type": "string"
          },
          "ADDRESS-1": {
            "type": "string"
          },
          "ADDRESS-2": {
            "type": "string"
          },
          "ADDRESS-3": {
            "type": "string"
          },
          "PHONE-1": {
            "type": "string"
          }
        }
      },
      "VARIATION": {
        "type": "object",
        "properties": {
          "VALUE": {
            "type": "string"
          },
          "REPORTED-DATE": {
            "type": "string"
          }
        }
      },
      "B2C-REPORT": {
        "type": "object",
        "properties": {
          "HEADER": {
            "$ref": "#/components/schemas/HEADER"
          },
          "REQUEST": {
            "$ref": "#/components/schemas/REQUEST"
          },
          "PERSONAL-INFO-VARIATION": {
            "type": "object",
            "properties": {
              "NAME-VARIATIONS": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "VARIATION": {
                      "type": "object",
                      "properties": {
                        "VALUE": {
                          "type": "string"
                        },
                        "REPORTED-DATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "ADDRESS-VARIATIONS": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "VARIATION": {
                      "type": "object",
                      "properties": {
                        "VALUE": {
                          "type": "string"
                        },
                        "REPORTED-DATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "PAN-VARIATIONS": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "VARIATION": {
                      "type": "object",
                      "properties": {
                        "VALUE": {
                          "type": "string"
                        },
                        "REPORTED-DATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "UID-VARIATIONS": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "VARIATION": {
                      "type": "object",
                      "properties": {
                        "VALUE": {
                          "type": "string"
                        },
                        "REPORTED-DATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "OTHER-ID-VARIATIONS": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/VARIATION"
                }
              },
              "DRIVING-LICENSE-VARIATIONS": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/VARIATION"
                }
              },
              "DATE-OF-BIRTH-VARIATIONS": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "VARIATION": {
                      "type": "object",
                      "properties": {
                        "VALUE": {
                          "type": "string"
                        },
                        "REPORTED-DATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "VOTER-ID-VARIATIONS": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "VARIATION": {
                      "type": "object",
                      "properties": {
                        "VALUE": {
                          "type": "string"
                        },
                        "REPORTED-DATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "PASSPORT-VARIATIONS": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/VARIATION"
                }
              },
              "PHONE-NUMBER-VARIATIONS": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "VARIATION": {
                      "type": "object",
                      "properties": {
                        "VALUE": {
                          "type": "string"
                        },
                        "REPORTED-DATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              },
              "RATION-CARD-VARIATIONS": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/VARIATION"
                }
              },
              "EMAIL-VARIATIONS": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "VARIATION": {
                      "type": "object",
                      "properties": {
                        "VALUE": {
                          "type": "string"
                        },
                        "REPORTED-DATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "SECONDARY-MATCHES": {
            "type": "array",
            "items": {
              "type": "object"
            }
          },
          "ACCOUNTS-SUMMARY": {
            "type": "object",
            "properties": {
              "DERIVED-ATTRIBUTES": {
                "type": "object",
                "properties": {
                  "INQURIES-IN-LAST-SIX-MONTHS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "LENGTH-OF-CREDIT-HISTORY-YEAR": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "LENGTH-OF-CREDIT-HISTORY-MONTH": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "AVERAGE-ACCOUNT-AGE-YEAR": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "AVERAGE-ACCOUNT-AGE-MONTH": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "NEW-ACCOUNTS-IN-LAST-SIX-MONTHS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "NEW-DELINQ-ACCOUNT-IN-LAST-SIX-MONTHS": {
                    "type": "integer",
                    "format": "int32"
                  }
                }
              },
              "PRIMARY-ACCOUNTS-SUMMARY": {
                "type": "object",
                "properties": {
                  "PRIMARY-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "PRIMARY-ACTIVE-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "PRIMARY-OVERDUE-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "PRIMARY-SECURED-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "PRIMARY-UNSECURED-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "PRIMARY-UNTAGGED-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "PRIMARY-CURRENT-BALANCE": {
                    "type": "string"
                  },
                  "PRIMARY-SANCTIONED-AMOUNT": {
                    "type": "string"
                  },
                  "PRIMARY-DISBURSED-AMOUNT": {
                    "type": "string"
                  }
                }
              },
              "SECONDARY-ACCOUNTS-SUMMARY": {
                "type": "object",
                "properties": {
                  "SECONDARY-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "SECONDARY-ACTIVE-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "SECONDARY-OVERDUE-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "SECONDARY-SECURED-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "SECONDARY-UNSECURED-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "SECONDARY-UNTAGGED-NUMBER-OF-ACCOUNTS": {
                    "type": "integer",
                    "format": "int32"
                  },
                  "SECONDARY-CURRENT-BALANCE": {
                    "type": "string"
                  },
                  "SECONDARY-SANCTIONED-AMOUNT": {
                    "type": "string"
                  },
                  "SECONDARY-DISBURSED-AMOUNT": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "RESPONSES": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "RESPONSE": {
                  "type": "object",
                  "properties": {
                    "LOAN-DETAILS": {
                      "type": "object",
                      "properties": {
                        "ACCT-NUMBER": {
                          "type": "string"
                        },
                        "CREDIT-GUARANTOR": {
                          "type": "string"
                        },
                        "ACCT-TYPE": {
                          "type": "string"
                        },
                        "DATE-REPORTED": {
                          "type": "string"
                        },
                        "OWNERSHIP-IND": {
                          "type": "string"
                        },
                        "ACCOUNT-STATUS": {
                          "type": "string"
                        },
                        "DISBURSED-AMT": {
                          "type": "string"
                        },
                        "DISBURSED-DT": {
                          "type": "string"
                        },
                        "LAST-PAYMENT-DATE": {
                          "type": "string"
                        },
                        "CLOSED-DATE": {
                          "type": "string"
                        },
                        "OVERDUE-AMT": {
                          "type": "string"
                        },
                        "WRITE-OFF-AMT": {
                          "type": "string"
                        },
                        "CURRENT-BAL": {
                          "type": "string"
                        },
                        "COMBINED-PAYMENT-HISTORY": {
                          "type": "string"
                        },
                        "MATCHED-TYPE": {
                          "type": "string"
                        },
                        "LINKED-ACCOUNTS": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "ACCOUNT-DETAILS": {
                                "type": "object",
                                "properties": {
                                  "ACCT-NUMBER": {
                                    "type": "string"
                                  },
                                  "CREDIT-GUARANTOR": {
                                    "type": "string"
                                  },
                                  "ACCT-TYPE": {
                                    "type": "string"
                                  },
                                  "DATE-REPORTED": {
                                    "type": "string"
                                  },
                                  "OWNERSHIP-IND": {
                                    "type": "string"
                                  },
                                  "ACCOUNT-STATUS": {
                                    "type": "string"
                                  },
                                  "DISBURSED-AMT": {
                                    "type": "string"
                                  },
                                  "DISBURSED-DT": {
                                    "type": "string"
                                  },
                                  "LAST-PAYMENT-DATE": {
                                    "type": "string"
                                  },
                                  "CLOSE-DATE": {
                                    "type": "string"
                                  },
                                  "OVERDUE-AMT": {
                                    "type": "string"
                                  },
                                  "CURRENT-BAL": {
                                    "type": "string"
                                  },
                                  "CREDIT-LIMIT": {
                                    "type": "string"
                                  },
                                  "SECURITY-DETAILS": {
                                    "type": "object",
                                    "properties": {
                                      "SECURITY-DETAIL": {
                                        "type": "object"
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        "CREDIT-LIMIT": {
                          "type": "string"
                        },
                        "SECURITY-DETAILS": {
                          "type": "array",
                          "items": {
                            "type": "object"
                          }
                        },
                        "ACTUAL-PAYMENT": {
                          "type": "string"
                        },
                        "INTEREST-RATE": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "INQUIRY-HISTORY": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "HISTORY": {
                  "type": "object",
                  "properties": {
                    "MEMBER-NAME": {
                      "type": "string"
                    },
                    "INQUIRY-DATE": {
                      "type": "string"
                    },
                    "PURPOSE": {
                      "type": "string"
                    },
                    "OWNERSHIP-TYPE": {
                      "type": "string"
                    },
                    "AMOUNT": {
                      "type": "string"
                    },
                    "REMARK": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "SCORES": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "SCORE": {
                  "type": "object",
                  "properties": {
                    "SCORE-TYPE": {
                      "type": "string"
                    },
                    "SCORE-VALUE": {
                      "type": "string"
                    },
                    "SCORE-FACTORS": {
                      "type": "string"
                    },
                    "SCORE-COMMENTS": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "PRINTABLE-REPORT": {
            "type": "object",
            "properties": {
              "TYPE": {
                "type": "string"
              },
              "FILE-NAME": {
                "type": "string"
              },
              "CONTENT": {
                "type": "string"
              }
            }
          },
          "EMPLOYMENT-DETAILS": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "EMPLOYMENT-DETAIL": {
                  "type": "object",
                  "properties": {
                    "ACCT-TYPE": {
                      "type": "string"
                    },
                    "DATE-REPORTED": {
                      "type": "string"
                    },
                    "OCCUPATION": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}